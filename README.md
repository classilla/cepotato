# The Commodore 128 ComputerEyes Potato Livecam

[Another Old VCR Funky Moment!](http://oldvcr.blogspot.com/)

Copyright 2023 Cameron Kaiser.  
All rights reserved.  
This project includes code under multiple variable licensing terms; see
the License section.

This project includes software copyright 1984 by Digital Vision, Inc. and/or
its successor company VITEC Multimedia, who is believed to be the current
holder of its former intellectual property. This software is not licensed
or endorsed by VITEC Multimedia and YOU USE IT AT YOUR OWN RISK. It is believed
to be freely distributable but you are responsible for any reliance you may
make upon this genuine and good-faith assertion.

## What it is

[Read the blog post first!](https://oldvcr.blogspot.com/2023/07/making-potato-webcam-with-commodore-128.html)

This project is intended for a Commodore 128 _in 64 mode_ with a Digital
Vision ComputerEyes (NTSC) acquisition module. This device allows the
C64 and C128 to get a slow-scan image of a still video image within a few
seconds or up to 50 seconds for the highest quality. It can't generate a
live feed with the default software due to the VIC-II's interference, so
this project enables the VDC to display the video feed instead.

The project is primarily assembled with the
[`xa` cross assembler](http://www.floodgap.com/retrotech/xa/). This is a
highly portable 2-pass cross-assembler with a rich pre-processor that the
source code uses heavily. It should compile easily on any modern system.

The BASIC portion is tokenized and linked using two Perl-based tools in the
`tools/` directory; therefore you must have installed at least Perl 5.005.
*Please note that the Perl tools exist under
a different license than the main source and are provided for
your convenience only.*

When you build the project with `make`, three files are generated:

* `ced`. This is a single-file version of Digital Vision's original ComputerEyes driver. It is compatible with the 64 and 128. `LOAD` and `RUN` it in 64 mode like a BASIC program. It will allow you to capture images and manually adjust the sync and brightness. Please note the help files are not included; if you want the original `.d64` with all the other files, see [this post](https://gmontag451.wordpress.com/2015/02/15/computereyes-on-the-commodore-64/). Capture takes between six and fifty seconds depending on complexity and quality.

* `vdcslow`. This runs on the 128 only _in 64 mode_. `LOAD` and `RUN` it like a BASIC program. It will first allow you to manually adjust the sync; press any key when the display is `IN SYNC`. It will then allow you to manually adjust the brightness; press any key when the display has good contrast range. The screen will then turn red to prompt you to switch to the 128's VDC output (thus you must have a compatible monitor such as a 1902 or 1084, or use the VDC's composite pin). A "live" feed of any connected video source will appear, updated approximately every six or seven seconds. If you press SHIFT LOCK, the source will freeze; while frozen, press the Commodore key until the disk drive starts to save the image to disk as a Portable Bit Map P4 file. This is saved under the filenames `0vdcgrab.pbm`, `1vdcgrab.pbm`, and so forth. Samples of this output are in this project (`*.pbm`). Any existing file under this name will be deleted. Release SHIFT LOCK to continue the feed.

* `vdcfast`. This is exactly the same as `vdcslow` except that it captures only 89% of the view but runs approximately 25% faster, about five to six seconds per frame.

In addition, in the `test/` directory is a demonstration of the VDC 320x200
monochrome mode used by `vdcslow` and `vdcfast`. When you build that subproject
with `make`, it generates a one-part file `vdc320`. `LOAD` and `RUN` it like
a BASIC program _in 64 mode_. It will display a bitmap on the VIC-II composite
output, copy it to VDC memory, and cycle the VDC colours. You can switch back
and forth between composite and VDC to see that the images are identical.

## Sample images

These are real images captured using `vdcslow` and `vdcfast`. The original
`.pbm` files generated by the 128 are provided as part of this project;
these were converted to PNG and enlarged for display.

![Screenshot.](/bill.png?raw=true "Screenshot.")

I'm [just a bill](https://youtu.be/OgVKvqTItto?t=60).

![Screenshot.](/me.png?raw=true "Screenshot.")

I'm just me.

![Screenshot.](/fastroom.png?raw=true "Screenshot.")

Here's 89% of half of the back wall of my workroom, taken with the "faster"
version.

## Don't file any issues or pull requests

Don't. Just don't.

If you must, remember this is a toy project and it must be worth my time.
Bug reports without a matching pull request may or may not be addressed and
may simply be deleted. Feature requests without one will be turned into
smoking stubs of charred flesh.

Similarly, if you don't like my coding style and want to refactor it, please
just fork the project.

## License

The converted original code contained in `ced.asm`, the detokenized BASIC
text contained in `xec.bas` and the reconstructed assembler source code in
`dir.asm` is (C) 1984
Digital Vision, Inc. It is not clear what, if any, license it was originally
released under. It is believed to be freely distributable but your use of it
is AT YOUR OWN RISK.

The tools in `tools/` are (C) 1998, 2006, 2022 Cameron Kaiser. All rights
reserved. These tools are provided under the
[Floodgap Free Software License](http://www.floodgap.com/software/ffsl/).

All other code is (C) 2023 Cameron Kaiser. All rights reserved. It is released
under the three-clause BSD license, i.e.:

"Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.

"THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF/SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
